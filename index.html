<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noris üíú</title>

    <!-- ============================================= -->
    <!-- ESTILOS CSS - Dise√±o responsive y animaciones -->
    <!-- ============================================= -->
    <style>
        /* --- RESET GENERAL --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* --- CUERPO DE LA P√ÅGINA --- */
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: #000;
            font-family: 'Georgia', 'Times New Roman', serif;
        }

        /* ============================================= */
        /* FASE 1: CONTENEDOR DEL VIDEO DE FONDO         */
        /* ============================================= */
        #fase-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            transition: opacity 1.5s ease-in-out;
        }

        /* --- VIDEO DE FONDO --- */
        #video-fondo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            object-fit: cover;
        }

        /* --- CAPA OSCURA SOBRE EL VIDEO --- */
        #overlay-oscuro {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.35);
            z-index: 2;
        }

        /* ============================================= */
        /* TEXTO PRINCIPAL - Estilo m√°quina de escribir   */
        /* ============================================= */
        #contenedor-texto {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 3;
            text-align: center;
            width: 90%;
            max-width: 800px;
        }

        /* ---- Texto con efecto typewriter ---- */
        /* üîÑ CAMBIO: Sombras cambiadas de ROSA a MORADO */
        #texto-animado {
            color: #fff;
            font-size: clamp(1.8rem, 5vw, 4rem);
            text-shadow: 
                0 0 10px rgba(155, 89, 182, 0.8),    /* üîÑ CAMBIO: morado */
                0 0 20px rgba(155, 89, 182, 0.6),    /* üîÑ CAMBIO: morado */
                0 0 40px rgba(155, 89, 182, 0.4),    /* üîÑ CAMBIO: morado */
                2px 2px 4px rgba(0, 0, 0, 0.8);
            letter-spacing: 3px;
            line-height: 1.4;
            font-style: italic;
            white-space: pre-wrap;
            min-height: 2em;
        }

        /* ---- Cursor parpadeante ---- */
        /* üîÑ CAMBIO: Color del cursor de rosa a morado */
        #cursor {
            display: inline-block;
            width: 3px;
            height: 1em;
            background-color: #9b59b6;    /* üîÑ CAMBIO: morado */
            margin-left: 4px;
            vertical-align: text-bottom;
            animation: parpadeo 0.6s infinite;
        }

        @keyframes parpadeo {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* ============================================= */
        /* FASE 2: DESPU√âS DEL VIDEO                      */
        /* ============================================= */
        #fase-gif {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            display: none;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        /* ---- Video de fondo BORROSO ---- */
        #video-borroso {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            object-fit: cover;
            filter: blur(15px) brightness(0.5);
        }

        /* ---- Contenedor del GIF del gato ---- */
        #contenedor-gif {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            z-index: 11;
            text-align: center;
            opacity: 0;
            transition: all 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        #contenedor-gif.visible {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        /* ---- Imagen del GIF (gato) ---- */
        /* üîÑ CAMBIO: Bordes y sombras de rosa a morado */
        #gif-gato {
            max-width: 80vw;
            max-height: 60vh;
            border-radius: 20px;
            box-shadow: 
                0 0 30px rgba(155, 89, 182, 0.6),    /* üîÑ CAMBIO: morado */
                0 0 60px rgba(155, 89, 182, 0.3);    /* üîÑ CAMBIO: morado */
            border: 3px solid rgba(155, 89, 182, 0.5); /* üîÑ CAMBIO: morado */
        }

        /* ---- Texto debajo del GIF ---- */
        /* üîÑ CAMBIO: Color de texto y sombras a morado */
        #texto-final {
            color: #9b59b6;                              /* üîÑ CAMBIO: morado */
            font-size: clamp(1.2rem, 3vw, 2.5rem);
            margin-top: 20px;
            text-shadow: 
                0 0 10px rgba(155, 89, 182, 0.8),    /* üîÑ CAMBIO: morado */
                0 0 20px rgba(155, 89, 182, 0.5);    /* üîÑ CAMBIO: morado */
            opacity: 0;
            transition: opacity 1s ease-in-out 0.5s;
        }

        #texto-final.visible {
            opacity: 1;
        }

        /* ============================================= */
        /* CORAZONES FLOTANTES DECORATIVOS               */
        /* ============================================= */
        .corazon {
            position: fixed;
            z-index: 20;
            font-size: 1.5rem;
            opacity: 0;
            pointer-events: none;
            animation: flotar-corazon 4s ease-in-out forwards;
        }

        @keyframes flotar-corazon {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0.5);
            }
            20% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) scale(1.2);
            }
        }

        /* ============================================= */
        /* BOT√ìN DE INICIO                                */
        /* üîÑ CAMBIO: Colores del bot√≥n a morado          */
        /* ============================================= -->
        #boton-inicio {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            background: linear-gradient(135deg, #9b59b6, #8e44ad);  /* üîÑ CAMBIO: morado */
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: clamp(1.2rem, 3vw, 2rem);
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Georgia', serif;
            box-shadow: 
                0 0 20px rgba(155, 89, 182, 0.6),    /* üîÑ CAMBIO: morado */
                0 0 40px rgba(155, 89, 182, 0.3);    /* üîÑ CAMBIO: morado */
            transition: all 0.3s ease;
            animation: pulsar-boton 2s ease-in-out infinite;
        }

        #boton-inicio:hover {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 
                0 0 30px rgba(155, 89, 182, 0.8),    /* üîÑ CAMBIO: morado */
                0 0 60px rgba(155, 89, 182, 0.5);    /* üîÑ CAMBIO: morado */
        }

        /* üîÑ CAMBIO: Animaci√≥n del bot√≥n en morado */
        @keyframes pulsar-boton {
            0%, 100% { box-shadow: 0 0 20px rgba(155, 89, 182, 0.6); }
            50% { box-shadow: 0 0 40px rgba(155, 89, 182, 0.9), 0 0 80px rgba(155, 89, 182, 0.4); }
        }

        /* ============================================= */
        /* PART√çCULAS DE BRILLO DECORATIVAS              */
        /* üîÑ CAMBIO: Color de part√≠culas a morado        */
        /* ============================================= */
        .particula {
            position: fixed;
            width: 4px;
            height: 4px;
            background: #9b59b6;    /* üîÑ CAMBIO: morado */
            border-radius: 50%;
            pointer-events: none;
            z-index: 15;
            opacity: 0;
        }

        /* ============================================= */
        /* MEDIA QUERIES - Adaptaci√≥n a m√≥viles          */
        /* ============================================= */
        @media (max-width: 768px) {
            #gif-gato {
                max-width: 90vw;
                max-height: 50vh;
            }
            #contenedor-texto {
                width: 95%;
            }
            #boton-inicio {
                padding: 15px 35px;
            }
        }

        @media (max-width: 480px) {
            #gif-gato {
                max-width: 95vw;
                max-height: 45vh;
                border-radius: 15px;
            }
        }
    </style>
</head>
<body>

    <!-- ============================================= -->
    <!-- BOT√ìN DE INICIO                                -->
    <!-- üîÑ CAMBIO: Emojis cambiados a corazones morados -->
    <!-- ============================================= -->
    <button id="boton-inicio">üíú Toca para comenzar üíú</button>

    <!-- ============================================= -->
    <!-- FASE 1: VIDEO + TEXTO ANIMADO                  -->
    <!-- ============================================= -->
    <div id="fase-video">
        <video id="video-fondo" muted playsinline>
            <source src="video.mp4" type="video/mp4">
        </video>
        <div id="overlay-oscuro"></div>
        <div id="contenedor-texto">
            <span id="texto-animado"></span>
            <span id="cursor">|</span>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- FASE 2: VIDEO BORROSO + GIF DEL GATO           -->
    <!-- ============================================= -->
    <div id="fase-gif">
        <video id="video-borroso" loop muted playsinline>
            <source src="video.mp4" type="video/mp4">
        </video>
        <div id="contenedor-gif">
            <img id="gif-gato" src="imagen uno.jpeg" alt="Gatito con flor">
            <!-- üîÑ CAMBIO: Emojis cambiados a corazones morados -->
            <div id="texto-final">üíú Te quiero mucho, Noris üíú</div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- üîä AUDIOS                                       -->
    <!-- ============================================= -->

    <!-- üéµ Audio principal del video -->
    <audio id="audio-principal" preload="auto">
        <source src="video audio.mpeg" type="audio/mpeg">
    </audio>

    <!-- ‚å®Ô∏è Audio de m√°quina de escribir -->
    <audio id="audio-typewriter" preload="auto" loop>
        <source src="maquina de escribir audio.mpeg" type="audio/mpeg">
    </audio>

    <!-- ============================================= -->
    <!-- ü´ß NUEVO: AUDIO DE BURBUJA EXPLOTANDO           -->
    <!-- Este sonido se reproduce cada vez que aparece   -->
    <!-- el segundo gato (gato con flor)                 -->
    <!-- Duraci√≥n del audio: ~2 segundos                 -->
    <!--                                                 -->
    <!-- Puedes descargar este sonido gratis de:          -->
    <!--   https://pixabay.com/sound-effects/             -->
    <!--     (busca "bubble pop" o "bubble burst")        -->
    <!--   https://freesound.org                          -->
    <!--     (busca "bubble pop")                         -->
    <!-- ============================================= -->
    <!-- üîΩüîΩüîΩ CAMBIA AQU√ç LA RUTA DEL AUDIO DE BURBUJA üîΩüîΩüîΩ -->
    <audio id="audio-burbuja" preload="auto">
        <source src="audio de burbuja.mpeg" type="audio/mpeg">
        <!-- Si tu audio es .wav: -->
        <!-- <source src="burbuja.wav" type="audio/wav"> -->
        <!-- Si tu audio es .ogg: -->
        <!-- <source src="burbuja.ogg" type="audio/ogg"> -->
    </audio>

    <!-- ============================================= -->
    <!-- JAVASCRIPT - Toda la l√≥gica y animaciones      -->
    <!-- ============================================= -->
    <script>
        // ============================================= 
        // CONFIGURACI√ìN PRINCIPAL
        // ============================================= 

        const MENSAJE = "Feliz 14 de Febrero\nNoris üíú";  // üîÑ CAMBIO: emoji morado
        const DURACION_VIDEO = 13000;
        const ESPERA_INICIO_TEXTO = 1500;
        const TIEMPO_DISPONIBLE_TEXTO = DURACION_VIDEO - ESPERA_INICIO_TEXTO - 2000;
        const VELOCIDAD_LETRA = Math.floor(TIEMPO_DISPONIBLE_TEXTO / MENSAJE.length);

        // üñºÔ∏è Im√°genes del gato
        const IMAGEN_GATO_1 = "imagen uno.jpeg";
        const IMAGEN_GATO_2 = "iamgen 2.jpeg";
        const VELOCIDAD_GIF = 600;

        // ============================================= 
        // REFERENCIAS A ELEMENTOS DEL HTML
        // ============================================= 
        const botonInicio = document.getElementById('boton-inicio');
        const faseVideo = document.getElementById('fase-video');
        const faseGif = document.getElementById('fase-gif');
        const videoFondo = document.getElementById('video-fondo');
        const videoBorroso = document.getElementById('video-borroso');
        const textoAnimado = document.getElementById('texto-animado');
        const cursorElemento = document.getElementById('cursor');
        const contenedorGif = document.getElementById('contenedor-gif');
        const gifGato = document.getElementById('gif-gato');
        const textoFinal = document.getElementById('texto-final');
        const audioPrincipal = document.getElementById('audio-principal');
        const audioTypewriter = document.getElementById('audio-typewriter');

        // ============================================= 
        // ü´ß NUEVO: Referencia al audio de burbuja
        // ============================================= 
        const audioBurbuja = document.getElementById('audio-burbuja');

        // Variables de control
        let indiceLetra = 0;
        let intervaloTexto = null;
        let intervaloGif = null;
        let imagenActual = 1;

        // ============================================= 
        // BOT√ìN DE INICIO
        // ============================================= 
        botonInicio.addEventListener('click', function() {
            this.style.transition = 'opacity 0.5s ease';
            this.style.opacity = '0';

            setTimeout(() => {
                this.style.display = 'none';
                iniciarExperiencia();
            }, 500);
        });

        // ============================================= 
        // FUNCI√ìN PRINCIPAL: Inicia todo
        // ============================================= 
        function iniciarExperiencia() {
            videoFondo.play().catch(e => console.log('Error video:', e));
            audioPrincipal.play().catch(e => console.log('Error audio:', e));

            setTimeout(() => {
                iniciarTextoTypewriter();
            }, ESPERA_INICIO_TEXTO);

            videoFondo.addEventListener('ended', transicionAFase2);

            setTimeout(() => {
                transicionAFase2();
            }, DURACION_VIDEO + 500);

            iniciarCorazones();
        }

        // ============================================= 
        // EFECTO TYPEWRITER (M√°quina de escribir)
        // ============================================= 
        function iniciarTextoTypewriter() {
            audioTypewriter.volume = 0.5;
            audioTypewriter.play().catch(e => console.log('Error typewriter:', e));

            intervaloTexto = setInterval(() => {
                if (indiceLetra < MENSAJE.length) {
                    let letra = MENSAJE[indiceLetra];
                    if (letra === '\n') {
                        textoAnimado.innerHTML += '<br>';
                    } else {
                        textoAnimado.innerHTML += letra;
                    }
                    indiceLetra++;
                } else {
                    clearInterval(intervaloTexto);
                    audioTypewriter.pause();
                    audioTypewriter.currentTime = 0;
                    setTimeout(() => {
                        cursorElemento.style.display = 'none';
                    }, 1000);
                }
            }, VELOCIDAD_LETRA);
        }

        // ============================================= 
        // TRANSICI√ìN DE FASE 1 A FASE 2
        // ============================================= 
        let transicionEjecutada = false;

        function transicionAFase2() {
            if (transicionEjecutada) return;
            transicionEjecutada = true;

            if (intervaloTexto) {
                clearInterval(intervaloTexto);
                audioTypewriter.pause();
            }

            faseVideo.style.opacity = '0';

            setTimeout(() => {
                faseVideo.style.display = 'none';
                faseGif.style.display = 'block';
                videoBorroso.play().catch(e => console.log('Error video borroso:', e));

                requestAnimationFrame(() => {
                    faseGif.style.opacity = '1';
                });

                setTimeout(() => {
                    contenedorGif.classList.add('visible');
                    iniciarGifManual();
                    setTimeout(() => {
                        textoFinal.classList.add('visible');
                    }, 800);
                }, 500);

            }, 1500);
        }

        // ============================================= 
        // GIF MANUAL: Alterna entre las 2 im√°genes
        // ü´ß NUEVO: Reproduce sonido de burbuja cada vez
        //    que aparece el segundo gato (gato con flor)
        // ============================================= 
        function iniciarGifManual() {
            intervaloGif = setInterval(() => {
                if (imagenActual === 1) {
                    // Cambiar a imagen 2 (gato con flor)
                    gifGato.src = IMAGEN_GATO_2;
                    imagenActual = 2;

                    // ============================================= 
                    // ü´ß NUEVO: Reproducir sonido de burbuja
                    // Cada vez que aparece el gato con flor (imagen 2)
                    // se reproduce el efecto de burbuja explotando.
                    // Se reinicia el audio desde el inicio para que
                    // suene completo cada vez aunque la alternancia
                    // sea m√°s r√°pida que la duraci√≥n del audio (2s)
                    // ============================================= 
                    reproducirBurbuja();

                } else {
                    // Cambiar a imagen 1 (gato sin nada)
                    gifGato.src = IMAGEN_GATO_1;
                    imagenActual = 1;
                    // NO se reproduce burbuja cuando aparece el gato sin flor
                }
            }, VELOCIDAD_GIF);
        }

        // ============================================= 
        // ü´ß NUEVA FUNCI√ìN: Reproduce el sonido de burbuja
        // Reinicia el audio desde el segundo 0 cada vez
        // para que siempre se escuche desde el inicio.
        // Volumen al 60% para no tapar el audio principal
        // ============================================= 
        function reproducirBurbuja() {
            // Clonar el audio para permitir que suene
            // aunque la reproducci√≥n anterior no haya terminado.
            // Esto evita que se corte el sonido anterior y
            // permite que se superpongan si es necesario
            const burbujaClone = audioBurbuja.cloneNode();
            burbujaClone.volume = 0.6;  // 60% de volumen
            burbujaClone.play().catch(e => console.log('Error burbuja:', e));

            // Eliminar el clon del DOM despu√©s de 3 segundos
            // para no llenar la memoria con elementos de audio
            setTimeout(() => {
                burbujaClone.remove();
            }, 3000);
        }

        // ============================================= 
        // CORAZONES FLOTANTES DECORATIVOS
        // üîÑ CAMBIO: Todos los corazones ahora son MORADOS
        // ============================================= 
        function iniciarCorazones() {
            setInterval(() => {
                crearCorazon();
            }, 800);
        }

        function crearCorazon() {
            const corazon = document.createElement('div');
            corazon.classList.add('corazon');

            // ============================================= 
            // üîÑ CAMBIO: Array de emojis ahora solo tiene
            //    corazones y elementos MORADOS
            //    üíú = coraz√≥n morado
            //    üü£ = c√≠rculo morado
            //    ‚òÆÔ∏è = variedad visual
            //    üíü = coraz√≥n decorativo
            // ============================================= 
            corazon.innerHTML = ['üíú', 'üíú', 'üíú', 'üü£', 'üíú', 'üíú'][Math.floor(Math.random() * 6)];

            corazon.style.left = Math.random() * 100 + 'vw';
            corazon.style.top = '100vh';
            corazon.style.fontSize = (Math.random() * 1.5 + 0.8) + 'rem';

            document.body.appendChild(corazon);

            setTimeout(() => {
                corazon.remove();
            }, 4000);
        }

        // ============================================= 
        // PART√çCULAS DE BRILLO
        // ============================================= 
        function crearParticulas() {
            setInterval(() => {
                const particula = document.createElement('div');
                particula.classList.add('particula');
                particula.style.left = Math.random() * 100 + 'vw';
                particula.style.top = Math.random() * 100 + 'vh';
                particula.style.animation = `brillar ${Math.random() * 2 + 1}s ease-in-out`;
                document.body.appendChild(particula);
                setTimeout(() => particula.remove(), 3000);
            }, 300);
        }

        crearParticulas();

        // ============================================= 
        // PRE-CARGAR IM√ÅGENES
        // ============================================= 
        function precargarImagenes() {
            const img1 = new Image();
            img1.src = IMAGEN_GATO_1;
            const img2 = new Image();
            img2.src = IMAGEN_GATO_2;
        }

        precargarImagenes();
    </script>

</body>
</html>